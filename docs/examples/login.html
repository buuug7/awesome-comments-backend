<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>login</title>
  </head>
  <body style="padding: 5rem;word-break: break-all">
    <script>
      // login
      const login = () => {
        return fetch("http://localhost:3000/public/login", {
          method: "POST",
          headers: {
            "Content-type": "application/json",
            Accept: "application/json"
          },
          body: JSON.stringify({
            username: "buuug7",
            password: "123456"
          })
        });
      };

      // getData
      const getData = token => {
        fetch("http://localhost:3000/test", {
          headers: {
            Accept: "application/json",
            Authorization: `Bearer ${token}`
          }
        })
          .then(res => res.json())
          .then(json => console.log(json));
      };

      // first login and then request other api
      login()
        .then(res => res.json())
        .then(json => {
          getData(json.token);
        });
    </script>
  </body>
</html>
